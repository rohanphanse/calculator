<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>Calculator</title>
    <link href = "styles/main.css" rel = "stylesheet" type = "text/css" />
    <link href = "styles/grapher.css" rel = "stylesheet" type = "text/css" />
    <script src = "scripts/util.js"></script>
    <script src = "scripts/operations.js"></script>
    <script src = "scripts/calculator.js"></script>
    <script src = "scripts/grapher.js"></script>
    <script src = "scripts/main.js"></script>
</head>

<body>
    <div class = "center">
        <div id = "container">
            <div id = "title" class = "center-row">
                The Functional Calculator
            </div>
            <div id = "subtitle" class = "center-row">
                Crunch numbers using functional programming!
            </div>
            <div id = "config">
                <div class = "config-button">
                    <div class = "config-label">display</div>
                    <div class = "config-value" id = "theme-button">☯</div>
                    <div class = "config-value" id = "display-button">↔</div>
                </div>
                <div class = "config-button">
                    <div class = "config-label">angle</div>
                    <div class = "config-value" id = "angle-button">rad</div>
                </div>
                <div class = "config-button">
                    <div class = "config-label">digits</div>
                    <input id = "digits-input" class = "config-value" value = "12" maxlength = "2"/>
                </div>
            </div>
            <div class = "command-bar-container">
                <div id = "var-bar">
                    <div class = "command-text">Saved variables:</div>
                </div>
                <div class = "command-bar-overlay-right"></div>
                <div class = "command-bar-overlay-left"></div>
            </div>
            <div class = "command-bar-container">
                <div id = "user-bar">
                    <div class = "command-text">Saved functions:</div>
                </div>
                <div class = "command-bar-overlay-right"></div>
                <div class = "command-bar-overlay-left"></div>
            </div>
            <div id = "interface">
                <div class = "input-row">
                    <div class = "input" placeholder = "Enter an expression..." contenteditable = "plaintext-only" spellcheck="false"></div>
                    <div class = "input-autocomplete"></div>
                </div>
            </div>
        </div>
    </div>
    <div id = "side-bar">
        <div id = "side-bar-title">Help Guide</div>
        <div id = "side-bar-main">
            <b style = "font-size: 0.87rem">Welcome to Functional Calculator!</b>
            Learn more about this project at <a href = "https://github.com/rohanphanse/calculator" target = "_blank">github.com/rohanphanse/calculator</a>.
            <div class = "side-bar-rule"></div>
            <b>1. Variables and Functions</b>
            <pre>
`a = 3`
         Variable `a` declared
`f(x) = x^2 - 12x + 27`
         Function `f` declared</pre>
            Use <span data-text = "save" class = "command" style="margin: 0">save</span> to locally save variables and functions.
            <div class = "side-bar-rule"></div>
            <b>2. Commands and Keyboard</b>
            Commands:
            <ul>
                <li>Clear screen: <span data-text = "clear" class = "command">clear</span></li>
                <li>Last result: <span data-text = "ans" class = "command">ans</span></li>
                <li>Usage help: <span data-text = "help" class = "command">help</span></li>
                <li>Debug trace: <span data-text = "trace" class = "command">trace</span></li>
                <li>Plot graphs: <span data-text = "plot" class = "command">plot</span></li>
                <li>Differentiation: <span data-text = "diff" class = "command">diff</span></li>
            </ul>
            <pre>
`diff x^2 * sin(x)`
      `f'(x) = 2x * sin(x) + 
      x^2 * cos(x)`
      Derivative `f'` declared</pre>
            Keyboard:
            <ul>
                <li>Shift + enter: decimal answer</li>
                <li>Up arrow: move back in history</li>
                <li>Down arrow: move forward</li>
            </ul>
            <div class = "spacer"></div>
            Click <span data-text = "plot" class = "command" style = "margin: 0">plot</span> to learn how to graph functions, parametric + polar curves, and slope + vector fields!
            <div class = "side-bar-rule"></div>
            <b>3. Math</b>
            <br/>
            Math Operators: 
            <div class = "row">             
                <div data-text = "+" class = "command">+</div>
                <div data-text = "-" class = "command">-</div>
                <div data-text = "*" class = "command">*</div>
                <div data-text = "/" class = "command">/</div>
                <div data-text = "^" class = "command">^</div>
                <div data-text = "!" class = "command">!</div>
                <div data-text = "mod" class = "command">mod</div>
            </div>    
            <div class = "spacer"></div>
These operators support tensors, fractions, base systems, and units.
            <pre>
`[1, 2, 3] + 3[1, 0, -1]`
                   `[4, 2, 0]`
`3/4 * 3 - 10/6`
                        `7/12`
`3 mi + 5 km`
                 `6.106864 mi`
`ans to ft`     
                 `32244.16 ft`
`0xf - 0b111 - 0o7`
                           `1`</pre>
            <div class = "spacer"></div>
            Math Functions and Constants:
            <div class = "row">             
                <div data-text = "log(|)" class = "command">log</div>
                <div data-text = "ln(|)" class = "command">ln</div>
                <div data-text = "sqrt(|)" class = "command">sqrt</div>
                <div data-text = "abs(|)" class = "command">abs</div>
                <div data-text = "ceil(|)" class = "command">ceil</div>  
            </div>  
            <div class = "row">
                <div data-text = "floor(|)" class = "command">floor</div>
                <div data-text = "round(|)" class = "command">round</div>
                <div data-text = "pi" class = "command">pi</div>
                <div data-text = "e" class = "command">e</div>
                <div data-text = "phi" class = "command">phi</div>
            </div>
            <div class = "spacer"></div>
            Trigonometry:
            <div class = "row">             
                <div data-text = "sin(|)" class = "command">sin</div>
                <div data-text = "cos(|)" class = "command">cos</div>
                <div data-text = "tan(|)" class = "command">tan</div>
                <div data-text = "arcsin(|)" class = "command">arcsin</div>
                <div data-text = "arccos(|)" class = "command">arccos</div>
            </div>   
            <div class = "row">
                <div data-text = "arctan(|)" class = "command">arctan</div>
                <div data-text = "csc(|)" class = "command">csc</div>
                <div data-text = "sec(|)" class = "command">sec</div>
                <div data-text = "cot(|)" class = "command">cot</div>
            </div>
            <div class = "spacer"></div>
            <pre>
`log(10) + log(2, 8)`
                           `4`        
`1 + sin(pi/2) + ln(e^-2)`
                           `0`</pre>
            Linear Algebra:
            <div class = "row">
                <div data-text = "rref(|)" class = "command">rref</div>
                    <div data-text = "det(|)" class = "command">det</div>
                    <div data-text = "inv(|)" class = "command">inv</div>
                    <div data-text = "zeros(|)" class = "command">zeros</div>
                    <div data-text = "ident(|)" class = "command">ident</div>
            </div>
            <div class = "row">
                <div data-text = "tran(|)" class = "command">tran</div>
                <div data-text = "rank(|)" class = "command">rank</div>
                <div data-text = "cross" class = "command">cross</div>
            </div>
            <div class = "spacer"></div>
            <pre>
`M = [[1, 2], [2, 3]]`
         Variable `M` declared
`det(M)`
                          `-1`
`inv(M)`
                   `[[-3, 2],`
                    `[2, -1]]`</pre>
            Statistics:
            <div class = "row">
                <div data-text = "min(|)" class = "command">min</div>
                <div data-text = "max(|)" class = "command">max</div>
                <div data-text = "sum(|)" class = "command">sum</div>
                <div data-text = "mean(|)" class = "command">mean</div>
                <div data-text = "median(|)" class = "command">median</div>
            </div>
            <div class = "row">
                <div data-text = "sd(|)" class = "command">sd</div>
                <div data-text = "sort(|)" class = "command">sort</div>
            </div>
            <div class = "spacer"></div>
            Bitwise Operations:
            <div class = "row">
                <div data-text = "bin(|)" class = "command">bin</div>
                    <div data-text = "dec(|)" class = "command">dec</div>
                    <div data-text = "hex(|)" class = "command">hex</div>
                    <div data-text = "oct(|)" class = "command">oct</div>
                    <div data-text = "&lt;&lt;" class = "command">&lt;&lt;</div>
                    <div data-text = "&gt;&gt;" class = "command">&gt;&gt;</div>
            </div>
            <div class = "row">
                <div data-text = "~" class = "command">~</div>
                <div data-text = "&" class = "command">&</div>
                <div data-text = "|" data-override = "true" class = "command">|</div>
                <div data-text = "xor" class = "command">xor</div>
            </div>
            <div class = "spacer"></div>
            Boolean Operators:
            <div class = "row">
                <div data-text = "==" class = "command">==</div>
                <div data-text = "!=" class = "command">!=</div>
                <div data-text = "&lt;" class = "command">&lt;</div>
                <div data-text = "&gt;" class = "command">&gt;</div>
                <div data-text = "and" class = "command">and</div>
                <div data-text = "or" class = "command">or</div>
                <div data-text = "not" class = "command">not</div>
            </div>
            <div class = "spacer"></div>
            Miscellaneous:
            <div class = "row">
                <div data-text = "quad(|)" class = "command">quad</div>
                <div data-text = "cubic(|)" class = "command">cubic</div>
                <div data-text = "gcd(|)" class = "command">gcd</div>
                <div data-text = "lcm(|)" class = "command">lcm</div>
            </div>
            <div class = "row">
                <div data-text = "factor(|)" class = "command">factor</div>
                <div data-text = "choose" class = "command">choose</div>
                <div data-text = "perm" class = "command">perm</div>
            </div>
            <pre>
`quad(f)`
      `x^2 - 12x + 27 = 0`
      Roots: `x = 9` or `x = 3`</pre>
            <div class = "side-bar-rule"></div>
            <b>4. Functional Programming</b>
            Functional Paradigms:
            <div class = "row">
                <div data-text = "map(|)" class = "command">map</div>
                <div data-text = "filter(|)" class = "command">filter</div>
                <div data-text = "reduce(|)" class = "command">reduce</div>
            </div>
            <pre>
`map([1, 2, 3], @(x) = x^2)`
                   `[1, 4, 9]`
`p(n) = n mod 2 == 0`
         Function `p` declared
`filter([2, 3, 4], p)`
                      `[2, 4]`
`reduce([1, 2, 3], +)`
                           `6`</pre>
            <span data-text = "@(|)" class = "command" style = "margin: 0">@</span> is used for lambda functions, enabling two powerful paradigms: lambda capture and currying.
            <pre>
`add = @(a) = @(b) = a + b`
       Variable `add` declared    
`inc = add(1)` 
       Variable `inc` declared   
`add(1)(2)`
                           `3`
`inc(10)`
                          `11`</pre>
            Use conditional logic to help implement recursive functions.
            <pre>
`if false then 1 else if 
true then 2 else 3`
                           `2`
`fact(n) = if n &lt;= 1 then 1 
else n * fact(n - 1)`
      Function `fact` declared
`trace fact(3)`
      `fact(3)
      |  fact(2)
      |  |  fact(1) -> 1
      |  fact(2) -> 2
      fact(3) -> 6`
            </pre>
            <div class = "side-bar-rule"></div>
            <b>5. Physics and Chemistry</b>
            <div class = "spacer"></div>
            Physical Constants:
            <div class = "row">
                <div data-text = "hh" class = "command">hh</div>
                <div data-text = "cc" class = "command">cc</div>
                <div data-text = "u0" class = "command">u0</div>
                <div data-text = "e0" class = "command">e0</div>
                <div data-text = "mel" class = "command">mel</div>
                <div data-text = "mp" class = "command">mp</div>
                <div data-text = "qe" class = "command">qe</div>
            </div>
            <div class = "row">
                <div data-text = "gg" class = "command">gg</div>
                <div data-text = "ge" class = "command">ge</div>
                <div data-text = "rr" class = "command">rr</div>
                <div data-text = "na" class = "command">na</div>
            </div>
            <div class = "spacer"></div>
            <div class = "command-spans">Molar masses: <span data-text="mH" class="command" style="margin: 0">mH</span> <span data-text="mHe" class="command" style="margin: 0">mHe</span> <span data-text="mLi" class="command" style="margin: 0">mLi</span> <span data-text="mBe" class="command" style="margin: 0">mBe</span> <span data-text="mB" class="command" style="margin: 0">mB</span> <span data-text="mC" class="command" style="margin: 0">mC</span> <span data-text="mN" class="command" style="margin: 0">mN</span> <span data-text="mO" class="command" style="margin: 0">mO</span> <span data-text="mF" class="command" style="margin: 0">mF</span> <span data-text="mNe" class="command" style="margin: 0">mNe</span> <span data-text="mNa" class="command" style="margin: 0">mNa</span> <span data-text="mMg" class="command" style="margin: 0">mMg</span> <span data-text="mAl" class="command" style="margin: 0">mAl</span> <span data-text="mSi" class="command" style="margin: 0">mSi</span> <span data-text="mP" class="command" style="margin: 0">mP</span> <span data-text="mS" class="command" style="margin: 0">mS</span> <span data-text="mCl" class="command" style="margin: 0">mCl</span> <span data-text="mAr" class="command" style="margin: 0">mAr</span> <span data-text="mK" class="command" style="margin: 0">mK</span> <span data-text="mCa" class="command" style="margin: 0">mCa</span> <span data-text="mTi" class="command" style="margin: 0">mTi</span> <span data-text="mCr" class="command" style="margin: 0">mCr</span> <span data-text="mMn" class="command" style="margin: 0">mMn</span> <span data-text="mFe" class="command" style="margin: 0">mFe</span> <span data-text="mCo" class="command" style="margin: 0">mCo</span> <span data-text="mNi" class="command" style="margin: 0">mNi</span> <span data-text="mCu" class="command" style="margin: 0">mCu</span> <span data-text="mZn" class="command" style="margin: 0">mZn</span> <span data-text="mAg" class="command" style="margin: 0">mAg</span> <span data-text="mAu" class="command" style="margin: 0">mAu</span> <span data-text="mHg" class="command" style="margin: 0">mHg</span> <span data-text="mPb" class="command" style="margin: 0">mPb</span> <span data-text="mU" class="command" style="margin: 0">mU</span></div>
            <pre>
`mH`
                  `1.00784 uu`
`mH2O`
                 `18.01468 uu`</pre>
            <div class = "spacer"></div>
            Units:
            <ul>
                <li>Length: <span data-text = "km" class = "command" style = "margin: 0">km</span> <span data-text = "me" class = "command" style = "margin: 0">me</span>  <span data-text = "cm" class = "command" style = "margin: 0">cm</span>  <span data-text = "mm" class = "command" style = "margin: 0">mm</span>  <span data-text = "um" class = "command" style = "margin: 0">um</span>  <span data-text = "nm" class = "command" style = "margin: 0">nm</span> <span data-text = "mi" class = "command" style = "margin: 0">mi</span> <span data-text = "ft" class = "command" style = "margin: 0">ft</span>  <span data-text = "in" class = "command" style = "margin: 0">in</span>  <span data-text = "au" class = "command" style = "margin: 0">au</span>  <span data-text = "ly" class = "command" style = "margin: 0">ly</span>
                </li>
                <li>Mass:  <span data-text = "kg" class = "command" style = "margin: 0">kg</span> <span data-text = "uu" class = "command" style = "margin: 0">uu</span> <span data-text = "gm" class = "command" style = "margin: 0">gm</span> <span data-text = "mg" class = "command" style = "margin: 0">mg</span> <span data-text = "lb" class = "command" style = "margin: 0">lb</span> <span data-text = "oz" class = "command" style = "margin: 0">oz</span> </li>
                <li>Time: <span data-text = "se" class = "command" style = "margin: 0">se</span>  <span data-text = "ms" class = "command" style = "margin: 0">ms</span> <span data-text = "mn" class = "command" style = "margin: 0">mn</span> <span data-text = "hr" class = "command" style = "margin: 0">hr</span> <span data-text = "day" class = "command" style = "margin: 0">day</span> <span data-text = "wk" class = "command" style = "margin: 0">wk</span> <span data-text = "yr" class = "command" style = "margin: 0">yr</span></li>
                <li>Energy:  <span data-text = "jl" class = "command" style = "margin: 0">jl</span>  <span data-text = "kj" class = "command" style = "margin: 0">kj</span>  <span data-text = "cal" class = "command" style = "margin: 0">cal</span>  <span data-text = "kcal" class = "command" style = "margin: 0">kcal</span> <span data-text = "ev" class = "command" style = "margin: 0">ev</span></li>
                <li>Volume:  <span data-text = "li" class = "command" style = "margin: 0">li</span>  <span data-text = "ml" class = "command" style = "margin: 0">ml</span>  <span data-text = "gal" class = "command" style = "margin: 0">gal</span></li>
                <li>Temperature:  <span data-text = "kel" class = "command" style = "margin: 0">kel</span> <span data-text = "cel" class = "command" style = "margin: 0">cel</span> <span data-text = "far" class = "command" style = "margin: 0">far</span></li>
                <li>Mechanics: <span data-text = "ne" class = "command" style = "margin: 0">ne</span> <span data-text = "pa" class = "command" style = "margin: 0">pa</span> <span data-text = "atm" class = "command" style = "margin: 0">atm</span> <span data-text = "wa" class = "command" style = "margin: 0">wa</span> </li>
                <li>E&M: <span data-text = "cu" class = "command" style = "margin: 0">cu</span> <span data-text = "am" class = "command" style = "margin: 0">am</span> <span data-text = "om" class = "command" style = "margin: 0">om</span> <span data-text = "vo" class = "command" style = "margin: 0">vo</span> <span data-text = "fa" class = "command" style = "margin: 0">fa</span> <span data-text = "wb" class = "command" style = "margin: 0">wb</span> <span data-text = "te" class = "command" style = "margin: 0">te</span> <span data-text = "he" class = "command" style = "margin: 0">he</span></li>
            </ul>
            <div class = "spacer"></div>
            Use <span data-text = "to" class = "command" style = "margin: 0">to</span> to convert one unit in an expression to another. Use <span data-text = "si" class = "command" style = "margin: 0">si</span> to convert an expression to SI units.
            <pre>
`u0`
 `0.00000125663706127 ne/am^2`
`e0`
      `8.8541878188e-12 fa/me`
`si 1 / sqrt(u0 * e0)`
             `299792458 me/se`
`cc to km to ms`
            `299.792458 km/ms`</pre>
            <div class = "side-bar-rule"></div>
            <b>6. Appendix</b>
            Learn which types built-in functions expect using <span data-text = "help" class = "command" style="margin: 0">help</span> and obtain types with <span data-text = "type(|)" class = "command" style="margin: 0">type</span>.
            <pre>
`type(M)`
          `list[list[number]]`
`map([sin, true, km], type)`  
      `[function, bool, unit]`</pre>
     List utilities:
     <div class = "row">
         <div data-text = "range(|)" class = "command">range</div>
         <div data-text = "len(|)" class = "command">len</div>
         <div data-text = ":" class = "command">:</div>
         <div data-text = "concat(|)" class = "command">concat</div>
         <div data-text = "flat(|)" class = "command">flat</div>
     </div>
     <div class = "spacer"></div>
     Note that list indexing is one-based and range is inclusive.
     <pre>
`M`
                    `[[1, 2],
                     [3, 4]]`
`M(2)`                 
                      `[3, 4]`
`M(2, 1)`                 
                           `3`
`M(:, 1)`                 
                      `[1, 3]`
`x = [2, 3, 5, 7]; x(2:)`
                   `[3, 5, 7]`
`range(2) == [1, 2]`
                        `true`</pre>
            <div class = "spacer"></div>
            Here's an implementation of the Sieve of Eratosthenes :).
            <pre>
`sieve(ls) = if ls == [] 
then [] else concat(ls(1), 
sieve(filter(ls(2:), 
@(x) = x mod ls(1))))`
     Function `sieve` declared
`sieve(range(2, 17))`
    `[2, 3, 5, 7, 11, 13, 17]`</pre>
            <div class = "side-bar-rule"></div>
        </div>
    </div>
    <div id = "side-bar-button">≡</div>
</body>

</html>